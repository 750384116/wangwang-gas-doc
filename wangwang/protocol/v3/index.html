<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>通讯协议 v3 | 汪汪燃运</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/wangwang-gas-doc/logo.png">
    <link rel="manifest" href="/wangwang-gas-doc/manifest.json">
    <link rel="apple-touch-icon" href="/wangwang-gas-doc/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/wangwang-gas-doc/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="可燃气体探测器接入开放平台">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/wangwang-gas-doc/assets/css/0.styles.ada818c6.css" as="style"><link rel="preload" href="/wangwang-gas-doc/assets/js/app.b37c2933.js" as="script"><link rel="preload" href="/wangwang-gas-doc/assets/js/5.9fbe3708.js" as="script"><link rel="preload" href="/wangwang-gas-doc/assets/js/4.7b614c82.js" as="script"><link rel="preload" href="/wangwang-gas-doc/assets/js/28.28798355.js" as="script"><link rel="preload" href="/wangwang-gas-doc/assets/js/9.00085909.js" as="script"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/10.d4f01da7.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/11.fba4ddb2.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/12.12583b4c.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/13.3a605214.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/14.24295321.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/15.1e1f6633.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/16.48c4f428.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/17.863fbdef.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/18.1ba06359.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/19.8530e2b4.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/20.fccd6048.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/21.6c974d6b.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/22.bf4d4e8b.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/23.83f356a3.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/24.cb736db0.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/25.1284c0a8.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/26.8a2e06ea.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/27.f1e827e4.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/29.defc9928.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/6.da2d9d77.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/7.c5c36ff4.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/8.159b995d.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/vendors~flowchart.7b35c902.js"><link rel="prefetch" href="/wangwang-gas-doc/assets/js/vendors~notification.8f3399e0.js">
    <link rel="stylesheet" href="/wangwang-gas-doc/assets/css/0.styles.ada818c6.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/wangwang-gas-doc/" class="home-link router-link-active"><img src="/wangwang-gas-doc/dog4.gif" alt="汪汪燃运" class="logo"> <span class="site-name can-hide">汪汪燃运</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/guide/" class="nav-link">
  接入指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="报警器通讯协议" class="dropdown-title"><span class="title">报警器通讯协议</span> <span class="arrow down"></span></button> <button type="button" aria-label="报警器通讯协议" class="mobile-dropdown-title"><span class="title">报警器通讯协议</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wangwang-gas-doc/wangwang/protocol/v1/" class="nav-link">
  v1
</a></li><li class="dropdown-item"><!----> <a href="/wangwang-gas-doc/wangwang/protocol/v2/" class="nav-link">
  v2
</a></li><li class="dropdown-item"><!----> <a href="/wangwang-gas-doc/wangwang/protocol/v3/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  v3
</a></li><li class="dropdown-item"><!----> <a href="/wangwang-gas-doc/wangwang/protocol/json/" class="nav-link">
  json
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开放API" class="dropdown-title"><span class="title">开放API</span> <span class="arrow down"></span></button> <button type="button" aria-label="开放API" class="mobile-dropdown-title"><span class="title">开放API</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          燃气报警器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wangwang-gas-doc/wangwang/developing/" class="nav-link">
  监控/报警推送
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/developing/" class="nav-link">
  常见问题
</a></div><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/developing/" class="nav-link">
  下载专区
</a></div><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/appendix/" class="nav-link">
  附录
</a></div><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/changelog/" class="nav-link">
  更新日志
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/guide/" class="nav-link">
  接入指南
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="报警器通讯协议" class="dropdown-title"><span class="title">报警器通讯协议</span> <span class="arrow down"></span></button> <button type="button" aria-label="报警器通讯协议" class="mobile-dropdown-title"><span class="title">报警器通讯协议</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wangwang-gas-doc/wangwang/protocol/v1/" class="nav-link">
  v1
</a></li><li class="dropdown-item"><!----> <a href="/wangwang-gas-doc/wangwang/protocol/v2/" class="nav-link">
  v2
</a></li><li class="dropdown-item"><!----> <a href="/wangwang-gas-doc/wangwang/protocol/v3/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  v3
</a></li><li class="dropdown-item"><!----> <a href="/wangwang-gas-doc/wangwang/protocol/json/" class="nav-link">
  json
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开放API" class="dropdown-title"><span class="title">开放API</span> <span class="arrow down"></span></button> <button type="button" aria-label="开放API" class="mobile-dropdown-title"><span class="title">开放API</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          燃气报警器
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/wangwang-gas-doc/wangwang/developing/" class="nav-link">
  监控/报警推送
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/developing/" class="nav-link">
  常见问题
</a></div><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/developing/" class="nav-link">
  下载专区
</a></div><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/appendix/" class="nav-link">
  附录
</a></div><div class="nav-item"><a href="/wangwang-gas-doc/wangwang/changelog/" class="nav-link">
  更新日志
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>通讯协议 v3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_1-完整协议格式" class="sidebar-link">1.完整协议格式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_1-1-下位机上传" class="sidebar-link">1.1. 下位机上传</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_1-2-上位机下发" class="sidebar-link">1.2. 上位机下发</a></li></ul></li><li><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-下位机上传" class="sidebar-link">2. 下位机上传</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-1-开机、关机信息-command-0x10" class="sidebar-link">2.1. 开机、关机信息（Command：0x10）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-2-上传报警数据-command-0x11" class="sidebar-link">2.2. 上传报警数据（Command：0x11）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-3-平台下发命令-设备上报运行参数-command-0x12" class="sidebar-link">2.3. 平台下发命令，设备上报运行参数（Command：0x12）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-4-平台下发复位命令-设备响应结果-command-0x13" class="sidebar-link">2.4. 平台下发复位命令，设备响应结果 （Command：0x13）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-5-平台下发消音命令-设备响应结果-command-0x14" class="sidebar-link">2.5.  平台下发消音命令，设备响应结果（Command：0x14）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-6-平台下发获取联动信息-联动控制-设备响应结果-command-0x15" class="sidebar-link">2.6. 平台下发获取联动信息/联动控制，设备响应结果（Command：0x15）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-7-设备要求服务器下发时间同步-预留-command-0x16" class="sidebar-link">2.7.</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_2-8-平台下发命令-设备执行异常后响应结果-command-0xff" class="sidebar-link">2.8. 平台下发命令，设备执行异常后响应结果 （Command：0xff）</a></li></ul></li><li><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_3-上位机下发" class="sidebar-link">3. 上位机下发</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_3-1-获取设备运行参数-command-0x91" class="sidebar-link">3.1. 获取设备运行参数 （Command：0x91）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_3-2-设置设备运行参数-command-0x92" class="sidebar-link">3.2. 设置设备运行参数 （Command：0x92）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_3-3-复位-command-0x93" class="sidebar-link">3.3. 复位（Command：0x93）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_3-4-消音-command-0x94" class="sidebar-link">3.4.  消音（Command：0x94）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_3-5-获取设备联动信息-command-0x95" class="sidebar-link">3.5. 获取设备联动信息（Command：0x95）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_3-6-设备联动控制-command-0x96" class="sidebar-link">3.6. 设备联动控制（Command：0x96）</a></li><li class="sidebar-sub-header"><a href="/wangwang-gas-doc/wangwang/protocol/v3/#_3-7-同步时间-预留-command-0x97" class="sidebar-link">3.7.</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="通讯协议-v3"><a href="#通讯协议-v3" class="header-anchor">#</a> 通讯协议 v3</h1> <p></p><div class="table-of-contents"><ul><li><a href="#_1-完整协议格式">1.完整协议格式</a><ul><li><a href="#_1-1-下位机上传">1.1. 下位机上传</a></li><li><a href="#_1-2-上位机下发">1.2. 上位机下发</a></li></ul></li><li><a href="#_2-下位机上传">2. 下位机上传</a><ul><li><a href="#_2-1-开机、关机信息-command-0x10">2.1. 开机、关机信息（Command：0x10）</a></li><li><a href="#_2-2-上传报警数据-command-0x11">2.2. 上传报警数据（Command：0x11）</a></li><li><a href="#_2-3-平台下发命令-设备上报运行参数-command-0x12">2.3. 平台下发命令，设备上报运行参数（Command：0x12）</a></li><li><a href="#_2-4-平台下发复位命令-设备响应结果-command-0x13">2.4. 平台下发复位命令，设备响应结果 （Command：0x13）</a></li><li><a href="#_2-5-平台下发消音命令-设备响应结果-command-0x14">2.5.  平台下发消音命令，设备响应结果（Command：0x14）</a></li><li><a href="#_2-6-平台下发获取联动信息-联动控制-设备响应结果-command-0x15">2.6. 平台下发获取联动信息/联动控制，设备响应结果（Command：0x15）</a></li><li><a href="#_2-7-s-设备要求服务器下发时间同步-预留-command-0x16-s">2.7. <s>设备要求服务器下发时间同步(预留)（Command：0x16）</s></a></li><li><a href="#_2-8-平台下发命令-设备执行异常后响应结果-command-0xff">2.8. 平台下发命令，设备执行异常后响应结果 （Command：0xff）</a></li></ul></li><li><a href="#_3-上位机下发">3. 上位机下发</a><ul><li><a href="#_3-1-获取设备运行参数-command-0x91">3.1. 获取设备运行参数 （Command：0x91）</a></li><li><a href="#_3-2-设置设备运行参数-command-0x92">3.2. 设置设备运行参数 （Command：0x92）</a></li><li><a href="#_3-3-复位-command-0x93">3.3. 复位（Command：0x93）</a></li><li><a href="#_3-4-消音-command-0x94">3.4.  消音（Command：0x94）</a></li><li><a href="#_3-5-获取设备联动信息-command-0x95">3.5. 获取设备联动信息（Command：0x95）</a></li><li><a href="#_3-6-设备联动控制-command-0x96">3.6. 设备联动控制（Command：0x96）</a></li><li><a href="#_3-7-s-同步时间-预留-command-0x97-s">3.7. <s>同步时间(预留)（Command：0x97）</s></a></li></ul></li></ul></div> <p></p> <h2 id="_1-完整协议格式"><a href="#_1-完整协议格式" class="header-anchor">#</a> 1.完整协议格式</h2> <h3 id="_1-1-下位机上传"><a href="#_1-1-下位机上传" class="header-anchor">#</a> 1.1. 下位机上传</h3> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>msgid</td> <td>1byte</td> <td>数据起始标识，固定0x61 (校验数据，防止数据被截断)</td></tr> <tr><td>version</td> <td>1byte</td> <td>协议版本号 0x03</td></tr> <tr><td>id-length</td> <td>1byte</td> <td>设备标识ID长度0 ~ 255</td></tr> <tr><td>id</td> <td>N byte</td> <td>设备标识ID  <br>如:Nbiot的IMEI  <br>id字符(UTF-8)的16进制数据</td></tr> <tr><td>signal</td> <td>1byte</td> <td>信号值</td></tr> <tr><td>厂商id</td> <td>2byte</td> <td><a href="/wangwang-gas-doc/wangwang/appendix/manufacturer.html">查看详情</a></td></tr> <tr><td>设备类型 type</td> <td>2byte</td> <td><a href="/wangwang-gas-doc/wangwang/appendix/device-type.html">查看详情</a></td></tr> <tr><td>command</td> <td>1byte</td> <td>功能码，区分不同的数据类型   <br>0x10 ： 开关机信息  <br>0x11 ： 设备数据上报   <br>0x12 ： 设备运行参数上报   <br>0x13 ： 复位   <br>0x14 ： 消音  <br>0x15 ： 设备联动信息上报  <br>0x16 ： 设备要求服务器下发时间同步(预留)  <br>0xff ： 平台下发命令，设备执行异常后响应结果</td></tr> <tr><td>Data-Length</td> <td>2byte</td> <td>数据长度 0 ~ 255</td></tr> <tr><td>Data</td> <td>Nbyte</td> <td>数据块</td></tr> <tr><td>校验</td> <td>2byte</td> <td>CRC16/modbus      <br>例如 数据为：01 02 03 04  校验= 2b a1  <br>规约内数据采用高字节在前  低字节在后(Big-Endian)  校验  计算Command -DATA(包含Command和Data)</td></tr> <tr><td>end-msgid</td> <td>1byte</td> <td>数据结束标识，同msgid</td></tr></tbody></table> <h3 id="_1-2-上位机下发"><a href="#_1-2-上位机下发" class="header-anchor">#</a> 1.2. 上位机下发</h3> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>msgid</td> <td>1byte</td> <td>数据起始标识，固定0x62 (校验数据，防止数据被截断)</td></tr> <tr><td>version</td> <td>1byte</td> <td>协议版本号 0x03</td></tr> <tr><td>ID-length</td> <td>1byte</td> <td>设备标识ID长度 0 ~ 255</td></tr> <tr><td>ID</td> <td>Nbyte</td> <td>设备标识ID  <br>如:Nbiot的IMEI  <br>id字符(UTF-8)的16进制数据</td></tr> <tr><td>taskid</td> <td>4byte</td> <td>下行命令流水号</td></tr> <tr><td>Command</td> <td>1byte</td> <td>功能码，区分不同的数据类型   <br>0x91 ： 获取设备运行参数  <br>0x92 ： 设置设备运行参数  <br>0x93 ： 响应复位  <br>0x94 ： 响应消音  <br>0x95 ： 获取设备联动状态</td></tr> <tr><td>Data-Length</td> <td>2byte</td> <td>0 ~ 255</td></tr> <tr><td>Data</td> <td>Nbyte</td> <td>数据块</td></tr> <tr><td>校验</td> <td>2byte</td> <td>CRC16/modbus      <br>例如 数据为：01 02 03 04  校验= 2b a1    <br>规约内数据采用高字节在前  低字节在后(Big-Endian)  校验  计算Command -DATA(包含Command和Data)</td></tr> <tr><td>end-msgid</td> <td>1byte</td> <td>数据结束标识，同msgid</td></tr></tbody></table> <h2 id="_2-下位机上传"><a href="#_2-下位机上传" class="header-anchor">#</a> 2. 下位机上传</h2> <h3 id="_2-1-开机、关机信息-command-0x10"><a href="#_2-1-开机、关机信息-command-0x10" class="header-anchor">#</a> 2.1. 开机、关机信息（Command：0x10）</h3> <p>1、 Data-Length ： (7 + n) byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>开关机</td> <td>1byte</td> <td>1 ： 开机  <br>0 ： 关机</td></tr> <tr><td>模式</td> <td>1byte</td> <td>0 ： GSM   <br>1 ： CDMA     <br> 2 ： Nbiot  <br>3 ： GPRS  <br>4 ： 其他</td></tr> <tr><td>定位信息</td> <td>1+n byte</td> <td>定位信息数据长度 1byte  <br>定位信息 n byte   <br> <strong>模式0</strong> (GSM)  4byte ; byte[0]-byte[1]  小区号 ; byte[2]-byte[3]  基站号</td></tr> <tr><td>硬件程序版本号</td> <td>1byte</td> <td>0x01 ~ 0xff</td></tr> <tr><td>控制器总数</td> <td>1byte</td> <td>0-255</td></tr> <tr><td>回路总数</td> <td>1byte</td> <td>0-255</td></tr> <tr><td>探测器总数</td> <td>1byte</td> <td>0-255</td></tr></tbody></table> <h3 id="_2-2-上传报警数据-command-0x11"><a href="#_2-2-上传报警数据-command-0x11" class="header-anchor">#</a> 2.2. 上传报警数据（Command：0x11）</h3> <p>1、 Data-Length ： ( 6 + n * 7 + m * 2) byte</p> <p>2、Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th colspan="4"><strong>备注</strong></th></tr></thead> <tbody><tr><td>电池电压</td> <td>2byte</td> <td colspan="4">除以100 例如 2678 ==&gt;26.78V</td></tr> <tr><td rowspan="3">总状态</td> <td rowspan="3">1byte</td> <td>bit7-bit6 
			    <br>控制器状态
            </td> <td colspan="3">00 ： 离线 
			    <br>01 ： 正常 
			    <br>10 ： 故障 
			    <br>11 ： 未知
            </td></tr> <tr><td>bit5-bit2 
			    <br>总报警+总故障 
			    <br>(优先级： 故障&gt;报警&gt;正常&gt;未知)
            </td> <td colspan="3">0000 ： 未知 
			    <br>0001 ： 正常 
			    <br>0010 ： 报警 
			    <br>0011 ： 故障
            </td></tr> <tr><td>bit1 ~ bit0</td> <td colspan="3">预留 00</td></tr> <tr><td rowspan="4">电池状态</td> <td rowspan="4">1byte</td> <td>bit7 ~ bit6</td> <td colspan="3">00 主电正常， 供电使用中 
			    <br>01 主电正常， 未供电，停用 
			    <br>11 主电故障
            </td></tr> <tr><td>bit5 ~ bit4</td> <td colspan="3">00 备电正常， 供电使用中 
			    <br>01 备电正常， 未供电，停用 
			    <br>10 无备电 
			    <br>11备电故障
            </td></tr> <tr><td>bit3 ~ bit2</td> <td colspan="3">00 充电正常 
			    <br>01 充电故障 
			    <br>11 未知
            </td></tr> <tr><td>bit1 ~ bit0</td> <td colspan="3">预留 00</td></tr> <tr><td>探测器数量(n)</td> <td>1byte</td> <td colspan="4">范围 : 0-255</td></tr> <tr><td rowspan="9">探测器信息</td> <td rowspan="9">n*7byte</td> <td rowspan="9">第n个探测器信息</td> <td rowspan="3">byte[0]</td> <td>Bit7-bit6 
			    <br>比例系数
            </td> <td>00 *1 
			    <br>01 *0.1 
			    <br>10 *0.01 
			    <br>11 *0.001
            </td></tr> <tr><td>Bit5-bit3 
			    <br>计量单位
            </td> <td>000 %LEL 
			    <br>001 PPM 
			    <br>010 %VOL 
			    <br>111 其他
            </td></tr> <tr><td>Bit2-bit0</td> <td>预留， 默认000</td></tr> <tr><td>byte[1] 
			    <br>探测器状态
            </td> <td colspan="2"> 0xff : 探测器为非法
			    <br>0xfe : 未知
			    <br>0xfd : 屏蔽
			    <br>0x00 : 离线
			    <br>0x01 : 正常
			    <br>0x02 : 报警(低报) 
			    <br>0x03 : 报警(高报)
			    <br>0x04 : 传感器离线
			    <br>0x05 : IIC离线
			    <br>0x06 : 探测器预热
            </td></tr> <tr><td>byte[2] <br>回路号</td> <td colspan="2">范围 : 1-255</td></tr> <tr><td>byte[3] <br>探测器地址位</td> <td colspan="2">范围 : 1-255</td></tr> <tr><td>byte[4] <br>气体类型</td> <td colspan="2">0x01 : 甲烷
			    <br>0x02 : 乙烷
			    <br>0x03 : 丙烷
			    <br>0x04 : 丁烷
			    <br>0x05 : 一氧化碳
			    <br>0x06 : 其他 (联系平台提供)
            </td></tr> <tr><td rowspan="2">byte[5]~byte[6] <br>探测器浓度</td> <td>bit15</td> <td>1寿命到期 <br>0正常</td></tr> <tr><td>bit14-bit0</td> <td>浓度</td></tr> <tr><td>联动数量(m)</td> <td>1byte</td> <td colspan="4">0-255</td></tr> <tr><td rowspan="4">联动信息</td> <td rowspan="4">m*2byte</td> <td rowspan="4">第m个联动设备信息</td> <td>byte[0] 联动地址位</td> <td colspan="2">范围:1-255</td></tr> <tr><td rowspan="3">byte[1] 联动信息</td> <td>bit7-bit5 <br>联动类型</td> <td>000: 电磁阀 
			    <br>001: 风扇 
			    <br>010 ~ 111: 预留
            </td></tr> <tr><td>bit4-bit2 <br>联动状态</td> <td>000: 关闭 
			    <br>111: 开启 
			    <br>001: 未接设备或离线 
			    <br>010~110: 预留
            </td></tr> <tr><td>bit1-bit0</td> <td>预留 00</td></tr></tbody></table> <h3 id="_2-3-平台下发命令-设备上报运行参数-command-0x12"><a href="#_2-3-平台下发命令-设备上报运行参数-command-0x12" class="header-anchor">#</a> 2.3. 平台下发命令，设备上报运行参数（Command：0x12）</h3> <p>1、 Data-Length ： (13 + n *4) byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>taskid</td> <td>4byte</td> <td>下行命令流水号（由平台生成，用于设备交互，下同）</td></tr> <tr><td>正常报数据频率</td> <td>4byte</td> <td>单位  ： 秒 0 ~ 4294967295</td></tr> <tr><td>报警后报数据频率</td> <td>4byte</td> <td>单位  ： 秒 0 ~ 4294967295</td></tr> <tr><td>探测器数量n</td> <td>1 byte</td> <td>0 ~ 255</td></tr> <tr><td>探测器1回路号</td> <td>1 byte</td> <td>0 ~ 255</td></tr> <tr><td>探测器1地址位</td> <td>1 byte</td> <td>0 ~ 255</td></tr> <tr><td>探测器1报警点</td> <td>1 byte</td> <td>0 代表无效</td></tr> <tr><td>探测器1突变阈值</td> <td>1 byte</td> <td>0 代表无效</td></tr> <tr><td><strong>......</strong></td> <td></td> <td></td></tr> <tr><td>探测器n回路号</td> <td>1 byte</td> <td>0 ~ 255</td></tr> <tr><td>探测器n地址位</td> <td>1 byte</td> <td>0 ~ 255</td></tr> <tr><td>探测器n报警点</td> <td>1 byte</td> <td>0 代表无效</td></tr> <tr><td>探测器n突变阈值</td> <td>1 byte</td> <td>0 代表无效</td></tr></tbody></table> <h3 id="_2-4-平台下发复位命令-设备响应结果-command-0x13"><a href="#_2-4-平台下发复位命令-设备响应结果-command-0x13" class="header-anchor">#</a> 2.4. 平台下发复位命令，设备响应结果 （Command：0x13）</h3> <p>1、 Data-Length ： 5byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>taskid</td> <td>4byte</td> <td>下行命令流水号</td></tr> <tr><td>结果</td> <td>1byte</td> <td>0： 失败  <br>1： 成功</td></tr></tbody></table> <h3 id="_2-5-平台下发消音命令-设备响应结果-command-0x14"><a href="#_2-5-平台下发消音命令-设备响应结果-command-0x14" class="header-anchor">#</a> 2.5.  平台下发消音命令，设备响应结果（Command：0x14）</h3> <p>1、 Data-Length ： 5byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>taskid</td> <td>4byte</td> <td>下行命令流水号</td></tr> <tr><td>结果</td> <td>1byte</td> <td>0： 失败  <br>1： 成功</td></tr></tbody></table> <h3 id="_2-6-平台下发获取联动信息-联动控制-设备响应结果-command-0x15"><a href="#_2-6-平台下发获取联动信息-联动控制-设备响应结果-command-0x15" class="header-anchor">#</a> 2.6. 平台下发获取联动信息/联动控制，设备响应结果（Command：0x15）</h3> <p>1、 Data-Length ： 5 + 2*n byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th colspan="4"><strong>备注</strong></th></tr></thead> <tbody><tr><td>taskid</td> <td>4byte</td> <td colspan="4">下行命令流水号</td></tr> <tr><td>联动数量(n)</td> <td>1byte</td> <td colspan="4">范围: 0-255</td></tr> <tr><td rowspan="4">联动信息</td> <td rowspan="4">n*2byte</td> <td rowspan="4">第n个联动信息</td> <td>byte[0] 联动地址位</td> <td colspan="2">范围:1-255</td></tr> <tr><td rowspan="3">byte[1] 联动信息</td> <td>bit7-bit5 联动类型</td> <td>000: 电磁阀 
			    <br>001: 风扇 
			    <br>010 ~ 111: 预留
            </td></tr> <tr><td>Bit4-bit2 联动状态</td> <td>000: 关闭 
			    <br>111: 开启 
			    <br>001: 未接设备或离线 
			    <br>010~110: 预留
            </td></tr> <tr><td>bit1-bit0</td> <td>预留</td></tr></tbody></table> <h3 id="_2-7-设备要求服务器下发时间同步-预留-command-0x16"><a href="#_2-7-设备要求服务器下发时间同步-预留-command-0x16" class="header-anchor">#</a> 2.7. <s>设备要求服务器下发时间同步(预留)（Command：0x16）</s></h3> <p>3、 Data-Length ： 0 byte</p> <p>4、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td></td> <td></td> <td></td></tr></tbody></table> <h3 id="_2-8-平台下发命令-设备执行异常后响应结果-command-0xff"><a href="#_2-8-平台下发命令-设备执行异常后响应结果-command-0xff" class="header-anchor">#</a> 2.8. 平台下发命令，设备执行异常后响应结果 （Command：0xff）</h3> <p>1、 Data-Length ： 5 byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>taskid</td> <td>4byte</td> <td>下行命令流水号</td></tr> <tr><td>错误原因</td> <td>1byte</td> <td>0x1 参数异常、错误  <br>0x2 功能码  command未匹配  <br>0x3 设备执行错误  <br>0x4 未知</td></tr></tbody></table> <h2 id="_3-上位机下发"><a href="#_3-上位机下发" class="header-anchor">#</a> 3. 上位机下发</h2> <h3 id="_3-1-获取设备运行参数-command-0x91"><a href="#_3-1-获取设备运行参数-command-0x91" class="header-anchor">#</a> 3.1. 获取设备运行参数 （Command：0x91）</h3> <p>1、 Data-Length ： 0 byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td></td> <td></td> <td></td></tr></tbody></table> <h3 id="_3-2-设置设备运行参数-command-0x92"><a href="#_3-2-设置设备运行参数-command-0x92" class="header-anchor">#</a> 3.2. 设置设备运行参数 （Command：0x92）</h3> <p>1、 Data-Length ： (9 + n *4) byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>正常报数据频率</td> <td>4byte</td> <td>单位  ： 秒 0 ~ 4294967295</td></tr> <tr><td>报警后报数据频率</td> <td>4byte</td> <td>单位  ： 秒 0 ~ 4294967295</td></tr> <tr><td>探测器数量n</td> <td>1 byte</td> <td>0 ~ 255</td></tr> <tr><td>探测器1回路号</td> <td>1 byte</td> <td>0 ~ 255</td></tr> <tr><td>探测器1地址位</td> <td>1 byte</td> <td>0 ~ 255</td></tr> <tr><td>探测器1报警点</td> <td>1 byte</td> <td>0 无效</td></tr> <tr><td>探测器1突变阈值</td> <td>1 byte</td> <td>0 无效</td></tr> <tr><td><strong>......</strong></td> <td></td> <td></td></tr> <tr><td>探测器n回路号</td> <td>1 byte</td> <td>0  ~ 255</td></tr> <tr><td>探测器n地址位</td> <td>1 byte</td> <td>0  ~ 255</td></tr> <tr><td>探测器n报警点</td> <td>1 byte</td> <td>0  代表无效</td></tr> <tr><td>探测器n突变阈值</td> <td>1 byte</td> <td>0  代表无效</td></tr></tbody></table> <h3 id="_3-3-复位-command-0x93"><a href="#_3-3-复位-command-0x93" class="header-anchor">#</a> 3.3. 复位（Command：0x93）</h3> <p>1、 Data-Length ： 0 byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td></td> <td></td> <td></td></tr></tbody></table> <p>​</p> <h3 id="_3-4-消音-command-0x94"><a href="#_3-4-消音-command-0x94" class="header-anchor">#</a> 3.4.  消音（Command：0x94）</h3> <p>1、 Data-Length ： 0 byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td></td> <td></td> <td></td></tr></tbody></table> <h3 id="_3-5-获取设备联动信息-command-0x95"><a href="#_3-5-获取设备联动信息-command-0x95" class="header-anchor">#</a> 3.5. 获取设备联动信息（Command：0x95）</h3> <p>1、 Data-Length ： 1 + n byte</p> <p>2、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>联动数量(n)</td> <td>1byte</td> <td>0-255</td></tr> <tr><td>联动信息</td> <td>n byte <br> n为需要获取的联动数量,每1个byte为联动设备的地址</td> <td>范围:1-255  联动地址位</td></tr></tbody></table> <h3 id="_3-6-设备联动控制-command-0x96"><a href="#_3-6-设备联动控制-command-0x96" class="header-anchor">#</a> 3.6. 设备联动控制（Command：0x96）</h3> <p>3、 Data-Length ： 1 + (2*n) byte</p> <p>4、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th colspan="3"><strong>备注</strong></th></tr></thead> <tbody><tr><td>联动数量(n)</td> <td>1byte</td> <td colspan="3">0-255</td></tr> <tr><td rowspan="3">联动信息</td> <td rowspan="3"> n*2byte</td> <td rowspan="3">第n个联动信息</td> <td>byte[0] 联动地址位</td> <td>范围:1-255</td></tr> <tr><td rowspan="2">byte[1] 联动操作</td> <td>bit 7 ~ bit 5
			    <br>111: 开启 
			    <br>000: 关闭
			</td></tr> <tr><td>bit 4 ~ bit 0
			    <br>预留
			</td></tr></tbody></table> <h3 id="_3-7-同步时间-预留-command-0x97"><a href="#_3-7-同步时间-预留-command-0x97" class="header-anchor">#</a> 3.7. <s>同步时间(预留)（Command：0x97）</s></h3> <p>3、 Data-Length ： 7 byte</p> <p>4、 Data ：</p> <table><thead><tr><th><strong>字段</strong></th> <th><strong>长度</strong></th> <th><strong>备注</strong></th></tr></thead> <tbody><tr><td>服务器时间   <br>yyyy-MM-dd HH:mm:ss</td> <td>7byte</td> <td>byte[0]~byte[1] : yyyy 年,如: 2020 -&gt; 0x07e4  <br>byte[2] : MM  月,如: 01 -&gt; 0x01  <br>byte[3] : dd  日,如: 01 -&gt; 0x01  <br>byte[4] : HH  时(24h),如: 01 -&gt;  0x01  <br>byte[5] : mm  分,如: 01 -&gt; 0x01  <br>byte[6] : ss  秒,如: 01 -&gt; 0x01</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="bsa-cpc-wrapper"><div class="bsa-cpc"></div></div></main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/wangwang-gas-doc/assets/js/app.b37c2933.js" defer></script><script src="/wangwang-gas-doc/assets/js/5.9fbe3708.js" defer></script><script src="/wangwang-gas-doc/assets/js/4.7b614c82.js" defer></script><script src="/wangwang-gas-doc/assets/js/28.28798355.js" defer></script><script src="/wangwang-gas-doc/assets/js/9.00085909.js" defer></script>
  </body>
</html>
